import gsap from 'gsap';
import React, { useEffect, useRef, VFC } from 'react';
import { css } from '@emotion/react';
import { appState } from '../../modules/store';

export const Loading: VFC = () => {
	const containerRef = useRef<HTMLDivElement>(null)

	useEffect(() => {
		const tl = gsap.timeline({
			onComplete: () => {
				containerRef.current!.style.zIndex = '-10'
				appState.endLoading = true
			}
		})
		tl.to('.N', { strokeDashoffset: 0, duration: 1, delay: 0.5, ease: 'power1.out' })
		tl.to('.e', { strokeDashoffset: 0, duration: 1, ease: 'power1.out' }, '< 0.5')
		tl.to('.m', { strokeDashoffset: 0, duration: 1, ease: 'power1.out' }, '< 0.5')
		tl.to('.u', { strokeDashoffset: 0, duration: 1, ease: 'power1.out' }, '< 0.5')
		tl.to('.t', { strokeDashoffset: 0, duration: 1, ease: 'power1.out' }, '< 0.5')
		tl.to('.a', { strokeDashoffset: 0, duration: 1, ease: 'power1.out' }, '< 0.5')
		tl.to('.s', { strokeDashoffset: 0, duration: 1, ease: 'power1.out' }, '< 0.5')
		tl.to('.logo', { fill: '#fff', duration: 0.3, ease: 'none' })
		tl.to('.container', { opacity: 0, duration: 0.3, delay: 0.3, ease: 'none' })
	}, [])

	return (
		<div ref={containerRef} className="container" css={styles.container}>
			<svg className="logo" width="441" height="72" viewBox="0 0 441 72" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path
					className="N"
					d="M58.936 69H45.496L15.064 23.016V69H1.62399V1.896H15.064L45.496 47.976V1.896H58.936V69Z"
					stroke="white"
					stroke-width="3"
					strokeLinejoin="round"
					strokeDasharray={400}
					strokeDashoffset={400}
				/>
				<path
					className="e"
					d="M121.658 41.256C121.658 43.176 121.53 44.904 121.274 46.44H82.3937C82.7137 50.28 84.0577 53.288 86.4257 55.464C88.7937 57.64 91.7057 58.728 95.1617 58.728C100.154 58.728 103.706 56.584 105.818 52.296H120.314C118.778 57.416 115.834 61.64 111.482 64.968C107.13 68.232 101.786 69.864 95.4497 69.864C90.3297 69.864 85.7217 68.744 81.6257 66.504C77.5937 64.2 74.4257 60.968 72.1217 56.808C69.8817 52.648 68.7617 47.848 68.7617 42.408C68.7617 36.904 69.8817 32.072 72.1217 27.912C74.3617 23.752 77.4977 20.552 81.5297 18.312C85.5617 16.072 90.2017 14.952 95.4497 14.952C100.506 14.952 105.018 16.04 108.986 18.216C113.018 20.392 116.122 23.496 118.298 27.528C120.538 31.496 121.658 36.072 121.658 41.256ZM107.738 37.416C107.674 33.96 106.426 31.208 103.994 29.16C101.562 27.048 98.5857 25.992 95.0657 25.992C91.7377 25.992 88.9217 27.016 86.6177 29.064C84.3777 31.048 83.0017 33.832 82.4897 37.416H107.738Z"
					stroke="white"
					stroke-width="3"
					strokeLinejoin="round"
					strokeDasharray={300}
					strokeDashoffset={300}
				/>
				<path
					className="m"
					d="M197.516 15.048C204.044 15.048 209.292 17.064 213.26 21.096C217.292 25.064 219.308 30.632 219.308 37.8V69H205.868V39.624C205.868 35.464 204.812 32.296 202.7 30.12C200.588 27.88 197.708 26.76 194.06 26.76C190.412 26.76 187.5 27.88 185.324 30.12C183.212 32.296 182.156 35.464 182.156 39.624V69H168.716V39.624C168.716 35.464 167.66 32.296 165.548 30.12C163.436 27.88 160.556 26.76 156.908 26.76C153.196 26.76 150.252 27.88 148.076 30.12C145.964 32.296 144.908 35.464 144.908 39.624V69H131.468V15.816H144.908V22.248C146.636 20.008 148.844 18.248 151.532 16.968C154.284 15.688 157.292 15.048 160.556 15.048C164.716 15.048 168.428 15.944 171.692 17.736C174.956 19.464 177.484 21.96 179.276 25.224C181.004 22.152 183.5 19.688 186.764 17.832C190.092 15.976 193.676 15.048 197.516 15.048Z"
					stroke="white"
					stroke-width="3"
					strokeLinejoin="round"
					strokeDasharray={450}
					strokeDashoffset={450}
				/>
				<path
					className="u"
					d="M282.27 15.816V69H268.733V62.28C267.005 64.584 264.734 66.408 261.918 67.752C259.166 69.032 256.157 69.672 252.893 69.672C248.733 69.672 245.053 68.808 241.853 67.08C238.653 65.288 236.126 62.696 234.27 59.304C232.478 55.848 231.581 51.752 231.581 47.016V15.816H245.021V45.096C245.021 49.32 246.077 52.584 248.189 54.888C250.301 57.128 253.181 58.248 256.829 58.248C260.541 58.248 263.453 57.128 265.565 54.888C267.677 52.584 268.733 49.32 268.733 45.096V15.816H282.27Z"
					stroke="white"
					stroke-width="3"
					strokeLinejoin="round"
					strokeDasharray={300}
					strokeDashoffset={300}
				/>
				<path
					className="t"
					d="M311.178 26.856V52.584C311.178 54.376 311.594 55.688 312.426 56.52C313.322 57.288 314.794 57.672 316.842 57.672H323.082V69H314.634C303.306 69 297.642 63.496 297.642 52.488V26.856H291.306V15.816H297.642V2.66399H311.178V15.816H323.082V26.856H311.178Z"
					stroke="white"
					stroke-width="3"
					strokeLinejoin="round"
					strokeDasharray={250}
					strokeDashoffset={250}
				/>
				<path
					className="a"
					d="M329.293 42.216C329.293 36.84 330.349 32.072 332.461 27.912C334.637 23.752 337.549 20.552 341.197 18.312C344.909 16.072 349.037 14.952 353.581 14.952C357.549 14.952 361.005 15.752 363.949 17.352C366.957 18.952 369.357 20.968 371.149 23.4V15.816H384.685V69H371.149V61.224C369.421 63.72 367.021 65.8 363.949 67.464C360.941 69.064 357.453 69.864 353.485 69.864C349.005 69.864 344.909 68.712 341.197 66.408C337.549 64.104 334.637 60.872 332.461 56.712C330.349 52.488 329.293 47.656 329.293 42.216ZM371.149 42.408C371.149 39.144 370.509 36.36 369.229 34.056C367.949 31.688 366.221 29.896 364.045 28.68C361.869 27.4 359.533 26.76 357.037 26.76C354.541 26.76 352.237 27.368 350.125 28.584C348.013 29.8 346.285 31.592 344.941 33.96C343.661 36.264 343.021 39.016 343.021 42.216C343.021 45.416 343.661 48.232 344.941 50.664C346.285 53.032 348.013 54.856 350.125 56.136C352.301 57.416 354.605 58.056 357.037 58.056C359.533 58.056 361.869 57.448 364.045 56.232C366.221 54.952 367.949 53.16 369.229 50.856C370.509 48.488 371.149 45.672 371.149 42.408Z"
					stroke="white"
					stroke-width="3"
					strokeLinejoin="round"
					strokeDasharray={250}
					strokeDashoffset={250}
				/>
				<path
					className="s"
					d="M418.164 69.864C413.812 69.864 409.908 69.096 406.452 67.56C402.996 65.96 400.243 63.816 398.195 61.128C396.211 58.44 395.123 55.464 394.931 52.2H408.467C408.723 54.248 409.716 55.944 411.444 57.288C413.236 58.632 415.444 59.304 418.068 59.304C420.628 59.304 422.612 58.792 424.02 57.768C425.492 56.744 426.228 55.432 426.228 53.832C426.228 52.104 425.331 50.824 423.539 49.992C421.811 49.096 419.028 48.136 415.188 47.112C411.22 46.152 407.956 45.16 405.396 44.136C402.9 43.112 400.723 41.544 398.867 39.432C397.075 37.32 396.18 34.472 396.18 30.888C396.18 27.944 397.012 25.256 398.676 22.824C400.404 20.392 402.835 18.472 405.971 17.064C409.171 15.656 412.915 14.952 417.203 14.952C423.539 14.952 428.595 16.552 432.371 19.752C436.147 22.888 438.228 27.144 438.612 32.52H425.747C425.555 30.408 424.66 28.744 423.06 27.528C421.524 26.248 419.443 25.608 416.819 25.608C414.387 25.608 412.499 26.056 411.155 26.952C409.875 27.848 409.236 29.096 409.236 30.696C409.236 32.488 410.131 33.864 411.923 34.824C413.715 35.72 416.5 36.648 420.276 37.608C424.116 38.568 427.284 39.56 429.78 40.584C432.276 41.608 434.419 43.208 436.211 45.384C438.067 47.496 439.027 50.312 439.091 53.832C439.091 56.904 438.228 59.656 436.5 62.088C434.836 64.52 432.403 66.44 429.203 67.848C426.067 69.192 422.388 69.864 418.164 69.864Z"
					stroke="white"
					stroke-width="3"
					strokeLinejoin="round"
					strokeDasharray={300}
					strokeDashoffset={300}
				/>
			</svg>
		</div>
	)
}

const styles = {
	container: css`
		position: absolute;
		top: 0px;
		left: 0px;
		width: 100%;
		height: 100%;
		background-color: #161616;
		display: flex;
		justify-content: center;
		align-items: center;
	`
}
